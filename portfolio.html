<!DOCTYPE html>
<html lang="da">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Portfolio | Adam Vecht</title>
  <link rel="stylesheet" type="text/css" href="style.css">
  <style media="screen">
    @media screen and (min-width: 1200px) {
      .splash_img {
        width: 100%;
        height: 60vh;
        object-fit: cover;
        display: block;
      }

      header {
        min-height: 60vh;
      }

      #navigation {
        position: absolute;
        top: 40vh;
        left: 2vw;
      }

      .retract {
        position: absolute;
        margin-top: -30px;
        text-align: center;
        left: 50%;
        margin-left: -400px;
      }
    }
  </style>


</head>

<header>

  <nav id="burger" role="navigation_mobile">
    <div id="menuToggle">
      <input type="checkbox" />

      <span></span>
      <span></span>
      <span></span>

      <ul id="menu">
        <li>
          <a href="bio.html">Biografi</a></li>

        <li>
          <a href="portfolio.html">Portfolio</a></li>

        <li>
          <a href="information.html">Information</a></li>

        <li>
          <a href="kontakt.html">Kontakt </a></li>

      </ul>
    </div>
  </nav>

  <nav id="mainNAV">
    <a href="index.html">
      <img class="logo_img"></a>
    <div class="colwrapper" id="navigation">
      <a href="bio.html">Biografi</a>
      <a href="portfolio.html">Portfolio</a>
      <a href="information.html">Information</a>
      <a href="kontakt.html">Kontakt</a>
    </div>
    <img class="splash_img">

  </nav>
</header>


<body>

  <!-- The Modal -->
  <div id="myModal" class="modal">

    <!-- Modal content -->
    <div class="modal-content">
      <span class="close">&times;</span>
      <img id="modal_img">
    </div>

  </div>
  <main id="content">

    <h1 class="overskrift retract">Portfolio</h1>
    <div class="galleri_nav">

      <div class="rowwrapper knapper">
        <div class="wrapper">
          <button class="filter" data-kategorier="traditional">TRADITIONAL</button>
          <button class="filter" data-kategorier="japanese">JAPANSK</button></div>
        <div class="wrapper">
          <button class="filter" data-kategorier="black and grey realism">BLACK & GREY REALISM</button>
          <button class="filter" data-kategorier="andet">ANDET</button></div>

      </div>




    </div>
    <div class="galleri">
      <main id="liste"></main>

      <template>
        <article>
          <img class="oplaeg_img">
        </article>
      </template>

    </div>


    <footer>
      <h3 class="navn"></h3>
      <img class="btm_logo_img">

      <div class="wrapper">

        <p class="adresse"></p>
        <p class="telefon"></p>
        <p class="email"></p>
      </div>
    </footer>


  </main>

  <div class="fixed_some">
    <div class="rowwrapper">
      <a href="https://www.instagram.com/tattoosbyadamv"><img class="instagram_ikon"></a>

      <a href="https://da-dk.facebook.com/pg/AdamVechtTattoo/"><img class="facebook_ikon"></a>
    </div>
  </div>
  <!-- JAVA -->

  <script>
    //find parametre (variabler) i url'en
    let urlParams = new URLSearchParams(window.location.search);
    //returner vÃ¦rdien for variablen "id"
    let id = urlParams.get("id");
    let billeder
    const liste = document.querySelector("#liste");
    const template = document.querySelector("template");
    let filteret = "alle";
    document.addEventListener("DOMContentLoaded", start);

    function start() {
      getJson();
      addEventListenersToButtons();
    }

    async function getJson() {

      const url1 = "http://adam.duedrengen.dk/wp-json/wp/v2/tattoo?per_page=100";
      const url2 = "http://adam.duedrengen.dk/wp-json/wp/v2/generelt/751";
      let response1 = await fetch(url1);
      let response2 = await fetch(url2);
      billeder = await response1.json();
      genereltIndhold = await response2.json();
      visPortfolio();
      visGenereltIndhold();

    }


    function visPortfolio() {

      console.log(billeder)
      liste.innerHTML = "";
      billeder.forEach(billede => {
        if (filteret == "alle" || filteret == billede.kategorier) {
          const clone = template.cloneNode(true).content;

          clone.querySelector(".oplaeg_img").src = billede.billede.guid;



          clone.querySelector("article").addEventListener("click", () => {
            visModal(billede)


          })
          liste.appendChild(clone);;
        }
      });
    }

    function addEventListenersToButtons() {
      document.querySelectorAll("button").forEach(elm => {
        elm.addEventListener("click", filtrering);
      })
    }

    function filtrering() {
      filteret = this.dataset.kategorier;;
      console.log("Du har valgt filteret:" + this.textContent);
      //document.querySelector(".overskrift2").textContent = this.textContent;
      document.querySelectorAll(".filter").forEach(elm => {
        elm.classList.remove("valgt");
      });
      this.classList.add("valgt");
      visPortfolio(modalbillede);
    }


    function visGenereltIndhold() {
      console.log("Henter generelt indhold...")
      document.querySelector(".adresse").textContent = genereltIndhold.adresse;
      document.querySelector(".email").textContent = genereltIndhold.email;
      document.querySelector(".telefon").textContent = genereltIndhold.tlf;
      document.querySelector(".navn").textContent = genereltIndhold.navn;
      document.querySelector(".facebook_ikon").src = genereltIndhold.facebook.guid;
      document.querySelector(".instagram_ikon").src = genereltIndhold.instagram.guid;
      document.querySelector(".logo_img").src = genereltIndhold.logo_forside.guid;
      document.querySelector(".btm_logo_img").src = genereltIndhold.logo.guid;
      document.querySelector(".splash_img").src = genereltIndhold.splash2.guid;
    }

    function visModal(billede) {
      document.querySelector(".modal").style.display = "block";
      document.querySelector(".close").addEventListener("click", skjulModal);
      document.querySelector("#modal_img").src = billede.billede.guid;
    }

    function skjulModal() {
      document.querySelector(".modal").style.display = "none";
      //window.scrollTo(0);
    }
  </script>
  <!-- HTML SLUT -->

</body>

</html>